## Стратегия масштабирования и отказоустойчивости

### Основной подход

Для данной задачи предпочтительно применять горизонтальное масштабирование, поскольку оно:

- **Распределяет нагрузку** между множеством серверов, что является критически важным для высокой доступности и отказоустойчивости.
- **Облегчает масштабирование** при увеличении количества пользователей и запросов.
- **Использует географически распределённые узлы** для сокращения задержек у пользователей из различных регионов.

### Размещение дата-центров

Для обеспечения равномерного времени загрузки страниц и минимизации задержек планируется размещение дата-центров по федеральным округам:

1. Северо-Западный федеральный округ  
2. Центральный федеральный округ  
3. Приволжский федеральный округ  
4. Южный федеральный округ  
5. Северо-Кавказский федеральный округ  
6. Уральский федеральный округ  
7. Сибирский федеральный округ  
8. Дальневосточный федеральный округ  

Дополнительно будет организована репликация данных между регионами для обеспечения локального доступа.

### Зоны доступности

Для повышения отказоустойчивости и защиты данных планируется использовать несколько зон доступности (AZ) в каждом регионе. Такой подход позволит изолировать сбои в одной зоне и сохранить работоспособность системы в других.

### Деплой приложения в Kubernetes

При развертывании приложения в нескольких зонах безопасности следует учесть следующие моменты:

- **Конфигурация развертывания:**  
  Использование независимых кластеров Kubernetes в каждой площадке соответствует следующим требованиям:
  - **Высокая отказоустойчивость:** Сбои в одном регионе не влияют на работу других.
  - **Локальная производительность:** Минимизация задержек для конечных пользователей.
  - **Простота восстановления:** Возможность независимого восстановления каждого региона.
  - **Соответствие RTO и RPO:** Быстрое восстановление данных и сервисов в случае сбоя.

- **Балансировка нагрузки:**  
  Для распределения трафика между географически распределёнными сервисами и серверами необходимо использовать многоуровневую стратегию:
  - **Глобальная балансировка нагрузки (GLB):** Для распределения трафика между регионами.
  - **Локальная балансировка нагрузки:** Для эффективного распределения запросов внутри каждого региона.

- **Фейловер-стратегия:**  
  Оптимальной будет стратегия Active-Active, которая обеспечивает:
  - **Минимальное время восстановления (RTO):** Все кластеры находятся в активном состоянии.
  - **Высокую доступность:** Система продолжает работать даже при сбое одного из регионов.
  - **Эффективное использование ресурсов:** Все кластеры одновременно обрабатывают трафик.

- **Конфигурация базы данных:**  
  Для соблюдения требований RTO и RPO используется PostgreSQL, так как она:
  - Подходит для реляционных данных.
  - Поддерживает репликацию и Point-in-Time Recovery (PITR).  
  Планируется внедрить геораспределённую репликацию с синхронной записью данных для обеспечения строгой консистентности, а также использовать минимум 3 сервера в каждом регионе (1 Primary + 2 Secondary) для повышения отказоустойчивости.


[решение, схема drawio]: https://drive.google.com/file/d/1kO1qnDjSepFyGHIf2C28F_F38KWc3sIo/view?usp=sharing
